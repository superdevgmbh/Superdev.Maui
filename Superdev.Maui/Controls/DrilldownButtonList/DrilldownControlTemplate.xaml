<ResourceDictionary
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:cardView="clr-namespace:Superdev.Maui.Controls.CardView"
    xmlns:controls="clr-namespace:Superdev.Maui.Controls">

    <ControlTemplate x:Key="DrilldownControlTemplate">
        <ContentView IsClippedToBounds="True">
            <Grid>
                <controls:CustomButton
                    Grid.Row="0"
                    AllCaps="False"
                    Command="{Binding Command, Mode=OneWay}"
                    CommandParameter="{Binding CommandParameter, Mode=OneWay}"
                    CornerRadius="0"
                    FontAttributes="None"
                    FontSize="{DynamicResource LargeSize}"
                    IsEnabled="{Binding IsEnabled, Mode=OneWay}"
                    Style="{DynamicResource DrilldownButtonStyle}"
                    Text="{Binding ., Mode=OneWay}"
                    HorizontalOptions="Fill"
                    VerticalOptions="Center"
                    HorizontalTextAlignment="Start"
                    VerticalTextAlignment="Center">

                    <controls:CustomButton.Padding>
                        <OnPlatform x:TypeArguments="Thickness">
                            <On
                                Platform="Android"
                                Value="8, 0, 0, 0" />
                            <On
                                Platform="iOS"
                                Value="16, 8, 16, 8" />
                        </OnPlatform>
                    </controls:CustomButton.Padding>
                </controls:CustomButton>

                <Grid
                    Grid.Row="0"
                    InputTransparent="True">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <ContentPresenter
                        Grid.Column="0"
                        InputTransparent="True">
                        <ContentPresenter.Padding>
                            <OnPlatform x:TypeArguments="Thickness">
                                <On
                                    Platform="Android"
                                    Value="8, 0, 0, 0" />
                                <On
                                    Platform="iOS"
                                    Value="16, 8, 8, 16" />
                            </OnPlatform>
                        </ContentPresenter.Padding>
                    </ContentPresenter>

                    <Image
                        Grid.Column="1"
                        Margin="0,0,8,0"
                        HeightRequest="24"
                        IsVisible="{Binding IsBusy, Mode=OneWay, Converter={StaticResource BoolInverter}}"
                        Source="{Binding ImageSource, Mode=OneWay}"
                        WidthRequest="24"
                        HorizontalOptions="End"
                        VerticalOptions="Center" />

                    <ActivityIndicator
                        x:Name="ActivityIndicator"
                        Grid.Column="1"
                        Margin="0,0,8,0"
                        IsRunning="{Binding IsBusy, Mode=OneWay}"
                        IsVisible="{Binding IsBusy, Mode=OneWay}"
                        WidthRequest="24"
                        HorizontalOptions="End"
                        VerticalOptions="Center" />
                </Grid>

                <Grid.GestureRecognizers>
                    <TapGestureRecognizer
                        Command="{Binding Command, Mode=OneWay}"
                        CommandParameter="{Binding CommandParameter, Mode=OneWay}" />
                </Grid.GestureRecognizers>
            </Grid>
        </ContentView>
    </ControlTemplate>
</ResourceDictionary>